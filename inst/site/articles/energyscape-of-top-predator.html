<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="energyscapes">
<title>Energyscape of top predator â€¢ energyscapes</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Energyscape of top predator">
<meta property="og:description" content="energyscapes">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">energyscapes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/energyscapes.html">Get started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/energyscape-of-top-predator.html">Energyscape of top predator</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CLambert1/energyscapes/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Energyscape of top predator</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CLambert1/energyscapes/blob/HEAD/vignettes/energyscape-of-top-predator.Rmd" class="external-link"><code>vignettes/energyscape-of-top-predator.Rmd</code></a></small>
      <div class="d-none name"><code>energyscape-of-top-predator.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CLambert1/energyscapes" class="external-link">energyscapes</a></span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/flat_bioconsest.Rmd: do not edit by hand -->
<!-- Run this 'development' chunk -->
<!-- Store every call to library() that you need to explore your functions -->
<div class="section level2">
<h2 id="estimate-energyscape-and-biomass-consumption">Estimate energyscape and biomass consumption<a class="anchor" aria-label="anchor" href="#estimate-energyscape-and-biomass-consumption"></a>
</h2>
<p>To estimate the energyscape and prey biomass consumption, we first
estimate the energyscape (spatialised energetic need of the population)
of a marine predator species (either cetacean, seabirds, loggerhead
turtles, sunfish, sharks, tunas or swordfish) from its abundance map and
body mass distribution, as well as the sea surface temperature (for fish
only). Second, we estimate the daily ration consumed for a given prey
group by a single predator individual and the corresponding biomass
consumed by the total population. This is done with
<code><a href="../reference/bio_cons_est.html">bio_cons_est()</a></code>, which runs a single estimation, drawing one
sample from each provided distribution (body mass, abundance map,
SST).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bio_cons_est.html">bio_cons_est</a></span><span class="op">(</span>predator_group <span class="op">=</span> <span class="st">"Procellariform"</span>,</span>
<span>             predator_name <span class="op">=</span> <span class="st">"CALDIO"</span>, </span>
<span>             prey_taxonomic_level <span class="op">=</span> <span class="st">"Taxonomic_group"</span>, </span>
<span>             prey_group <span class="op">=</span> <span class="st">"Teleost"</span>,</span>
<span>             diet <span class="op">=</span> <span class="va">diet</span>, </span>
<span>             assimilation_rate <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>             n_days <span class="op">=</span> <span class="fl">30</span><span class="op">+</span><span class="fl">31</span><span class="op">+</span><span class="fl">31</span>,</span>
<span>             predator_weight <span class="op">=</span> <span class="va">weight</span>, </span>
<span>             abundance_map <span class="op">=</span> <span class="va">species_abundance</span>, </span>
<span>             temperature_map <span class="op">=</span> <span class="va">sst</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="monte-carlo-simulation">Monte Carlo simulation<a class="anchor" aria-label="anchor" href="#monte-carlo-simulation"></a>
</h2>
<p>To obtain the final estimations, we embed this function into a Monte
Carlo simulation which runs it how many times is required to obtain a
reliable estimate. This number of simulation is set to 1000 by default
but can be changed by the user.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># test mc_simulation() with one prey level</span></span>
<span><span class="va">CALDIO_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mc_simulation.html">mc_simulation</a></span><span class="op">(</span>predator_name <span class="op">=</span> <span class="st">"CALDIO"</span>, </span>
<span>                               predator_group <span class="op">=</span> <span class="st">"Procellariform"</span>,</span>
<span>             map_coordinates <span class="op">=</span> <span class="va">map_coords</span>,</span>
<span>             prey_taxonomic_level <span class="op">=</span> <span class="st">"Taxonomic_group"</span>, </span>
<span>             diet <span class="op">=</span> <span class="va">diet</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">Taxonomic_group</span> <span class="op">==</span> <span class="st">"Teleost"</span><span class="op">)</span>, </span>
<span>             assimilation_rate <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>             n_days <span class="op">=</span> <span class="fl">30</span><span class="op">+</span><span class="fl">31</span><span class="op">+</span><span class="fl">31</span>,</span>
<span>             predator_weight <span class="op">=</span> <span class="va">weight</span>, </span>
<span>             abundance_map <span class="op">=</span> <span class="va">species_abundance</span>, </span>
<span>             temperature_map <span class="op">=</span> <span class="va">sst</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># test mc_simulation() with 2 prey levels</span></span>
<span><span class="va">CALDIO_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mc_simulation.html">mc_simulation</a></span><span class="op">(</span>predator_name <span class="op">=</span> <span class="st">"CALDIO"</span>, </span>
<span>                               predator_group <span class="op">=</span> <span class="st">"Procellariform"</span>,</span>
<span>             map_coordinates <span class="op">=</span> <span class="va">map_coords</span>,</span>
<span>             prey_taxonomic_level <span class="op">=</span> <span class="st">"Taxonomic_group"</span>, </span>
<span>             diet <span class="op">=</span> <span class="va">diet</span>, </span>
<span>             assimilation_rate <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>             n_days <span class="op">=</span> <span class="fl">30</span><span class="op">+</span><span class="fl">31</span><span class="op">+</span><span class="fl">31</span>,</span>
<span>             predator_weight <span class="op">=</span> <span class="va">weight</span>, </span>
<span>             abundance_map <span class="op">=</span> <span class="va">species_abundance</span>, </span>
<span>             temperature_map <span class="op">=</span> <span class="va">sst</span><span class="op">)</span></span>
<span><span class="co">#&gt; Computing Teleost for CALDIO</span></span>
<span><span class="co">#&gt; Computing Crustacea for CALDIO</span></span>
<span><span class="co">#&gt; Computing Cephalopoda for CALDIO</span></span>
<span><span class="co">#&gt; Wrapping up</span></span>
<span></span>
<span><span class="co"># plot results</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">CALDIO_result</span><span class="op">$</span><span class="va">Conso</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_pointrange</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">Prey_category</span>, x <span class="op">=</span> <span class="va">mean</span>, xmin <span class="op">=</span> <span class="va">L10</span>, xmax <span class="op">=</span> <span class="va">U90</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="energyscape-of-top-predator_files/figure-html/examples-mc_simulation-1.png" width="700"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">CALDIO_result</span><span class="op">$</span><span class="va">Energyscape</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, fill <span class="op">=</span> <span class="va">Energyscape_mean</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="energyscape-of-top-predator_files/figure-html/examples-mc_simulation-2.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Charlotte Lambert.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
